x=[ 1.2421431e+00
   2.3348046e+00
   1.3264331e-01
   2.3469988e+00
   6.7389056e+00
   3.7088873e+00
   1.1853350e+01
  -1.8707854e+00
   4.5024590e+00
   3.2798363e+00
   1.7572682e+00
   3.3784243e+00
   1.1470346e+01
   9.0595416e+00
  -2.8174477e+00
   9.3184495e+00
   8.4210660e+00
   8.6214789e-01
   7.5544377e+00
  -3.9883270e+00
   4.4970249e+00
   8.3062275e+00
  -2.6069534e+00
   4.4800554e+00
  -1.5073673e+00
   9.6283590e+00
  -6.2500378e-01
  -2.8015898e-01
  -1.0117321e-01
   7.4911834e+00
   3.4492085e+00
  -4.0705510e+00
  -1.7480843e+00
   7.3176114e+00
   1.1552244e+01
   6.9762965e+00
   8.6259390e+00
  -1.4937856e+00
   8.1353418e+00
   9.8358766e+00
   8.7256175e+00
   7.8626691e+00
   1.0378418e+01
   2.1569760e+00
   6.1928045e+00
  -4.9779585e+00
   1.1694030e+01
   2.0093448e+00
   9.0916205e-01
   6.3589285e+00
   2.5424801e+00
   9.2777895e+00
   4.0017789e+00
  -6.2859563e-01
  -2.3429246e+00
   4.4828742e+00
   1.1342105e+01
   1.1171635e+01
   7.4927089e+00
  -1.2165585e+00
   3.4427246e+00
  -4.8805891e+00
   3.7525605e-01
   7.5530827e+00
   8.4357108e+00
   1.8048051e+00
   1.7980896e+00
  -7.2123756e-01
  -3.4374984e+00
   5.2374846e+00
   9.1516244e+00
  -1.0777135e-02
   2.9141333e+00
  -4.2260437e+00
  -3.5427174e+00
   3.7234601e+00
   7.1622656e+00
  -4.3975951e+00
   1.1652830e+01
   3.4566372e+00
   6.9126457e+00
   8.6531912e+00
   3.7834624e+00
   3.5458639e+00
   7.8305554e+00
  -9.5217727e-01
   1.1032285e+01
  -3.4933700e+00
   4.2311613e+00
   1.0358684e+01
   9.6424676e+00
   5.7351564e+00
  -5.3982031e-01
   1.4432991e+00
   7.3450428e-01
   3.4811345e-01
   1.1100754e+01
   4.0979050e+00
   6.9332372e+00
   9.8756453e+00];
y=[1.1717629e+00
   1.8823554e+00
   3.4282705e-01
   2.1056512e+00
   1.6476588e+00
   2.3623765e+00
   2.1211766e+00
  -7.9712021e-01
   2.0310951e+00
   1.9795313e+00
   1.4709548e+00
   2.4610672e+00
   1.9818928e+00
   1.1202852e+00
  -1.3701397e+00
   1.0287304e+00
   1.3807704e+00
   1.2178235e+00
   1.4083926e+00
  -1.5208724e+00
   2.3881414e+00
   1.3682297e+00
  -9.9119802e-01
   2.0456873e+00
  -7.1916443e-01
   1.4128871e+00
   1.4789525e-01
   4.0247523e-01
   3.9212724e-01
   1.3949197e+00
   2.1508126e+00
  -1.6038757e+00
  -5.6510510e-01
   1.4494307e+00
   2.0077717e+00
   1.5654509e+00
   9.2077948e-01
  -3.0838877e-01
   1.1414546e+00
   1.5950321e+00
   1.1620196e+00
   1.3665559e+00
   1.3596056e+00
   2.0666331e+00
   1.7779095e+00
  -1.6942251e+00
   2.1346928e+00
   1.9221703e+00
   9.4870075e-01
   1.5030352e+00
   2.0884899e+00
   1.2275555e+00
   1.9671808e+00
   1.2501713e-01
  -1.1813651e+00
   2.2682710e+00
   2.0343778e+00
   1.9130043e+00
   1.2571767e+00
  -4.3840920e-01
   2.3377298e+00
  -1.4860570e+00
   8.1341626e-01
   1.5714659e+00
   1.3242354e+00
   1.7304581e+00
   1.5400972e+00
  -4.1704261e-02
  -1.3721798e+00
   2.2081153e+00
   1.1718142e+00
   4.2413595e-01
   2.2643926e+00
  -1.4192846e+00
  -1.5011527e+00
   2.1200465e+00
   1.4517493e+00
  -1.5990128e+00
   2.1215361e+00
   1.7080061e+00
   1.7471908e+00
   9.0302504e-01
   2.0958237e+00
   1.9744402e+00
   1.1578630e+00
  -4.5044438e-01
   1.7651026e+00
  -1.2828881e+00
   2.0858834e+00
   1.3242955e+00
   1.0501404e+00
   2.0126373e+00
  -1.3282607e-01
   1.4319692e+00
   8.5151329e-01
   6.4654095e-01
   1.7838535e+00
   2.3289020e+00
   1.3157936e+00
   1.1213807e+00];
scatter(x,y,'o','p')

theta1=mean(y)/mean(x);
theta0=mean(y)-theta1*mean(x);

alpha=30;
time = 0;
n=size(x);
old_k = 0;
while 1
    syms a b 
    f = 0;
    theta1=vpa(theta1,10);
    theta0=vpa(theta0,10);
    for i = 1:n
        f=f+(a*x(i)+b-y(i))^2;
    end
    diffa=diff(f,a);
    diffb=diff(f,b);
    cos_a=subs(diffa,a,theta0);
    cos_a=subs(cos_a,b,theta1);
    cos_b=subs(diffb,a,theta0);
    cos_b=subs(cos_b,b,theta1);
    t=cos_a^2+cos_b^2;
    cos_a=cos_a/t;
    cos_b=cos_b/t;
    old_theta1=theta1;
    old_theta0=theta0;
    k=subs(f,a,old_theta1);
    k=subs(k,b,old_theta0);
    theta1=theta1+cos_a*alpha;
    theta0=theta0+cos_b*alpha;
    theta1=vpa(theta1,10);
    theta0=vpa(theta0,10);
    j=subs(f,a,theta1);
    j=subs(j,b,theta0);
    if(j-k>0)
        theta1=old_theta1-cos_a*alpha;
        theta0=old_theta0-cos_b*alpha;
    end
    f = theta1 * x + theta0;
    plot(x,y,'r+',x,f)
    hold on
    time = time +1 ;
    if  j-k>-0.1 && j-k<0.1
        break;
    end
end
theta1
theta0
time

        